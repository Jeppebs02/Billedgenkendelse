version: '3.9'
services:
  billed-api:
    build:
      context: .                              # Billedgenkendelse/Python-code
      dockerfile: Billedegenkendelse/Dockerfile
    ports:
      - "5001:5001"
    environment:
      - OMP_NUM_THREADS=1
      - UV_LOOP_DISABLED=1
      - ULTRALYTICS_SETTINGS_DIR=/app/.ultralytics
    # If your model files are NOT in the repo/image, mount them from host:
    # volumes:
    #   - ./Billedegenkendelse/models:/app/Billedegenkendelse/models:ro
    networks:
      - npm
    restart: unless-stopped

networks:
  npm:
    external: true
    name: npm_default

